{
  "project": {
    "name": "Read Master",
    "description": "AI-powered reading comprehension platform - Post-MVP Enhancement Phase",
    "quality_standard": "Production code. Must be maintainable, testable, and follow best practices. This codebase will outlive you - fight entropy, leave it better than you found it.",
    "completion_criteria": "All active sprint tasks (defer_to_next_sprint: false) have passes: true, all tests pass, TypeScript has no errors, linting passes",
    "current_phase": "Post-MVP: Cross-platform expansion, advanced features, and production readiness"
  },
  "feedback_loops": {
    "required": ["typecheck", "lint", "test"],
    "commands": {
      "typecheck": "pnpm typecheck",
      "lint": "pnpm lint",
      "test": "pnpm vitest run"
    },
    "enforcement": "Do NOT commit if any feedback loop fails. Fix issues first."
  },
  "sprint_info": {
    "description": "Post-MVP tasks: Cross-platform apps, advanced social features, production monitoring, and polish",
    "current_sprint_focus": "Desktop & Mobile apps, Book clubs, Leaderboards, Production monitoring (Sentry, PostHog), Email marketing",
    "completed_features": [
      "✅ Complete Web MVP (100%)",
      "✅ All core reading features",
      "✅ Full AI suite (6 AI features)",
      "✅ SRS flashcards",
      "✅ Social features (profiles, following, sharing)",
      "✅ Gamification (achievements, challenges)",
      "✅ TTS (3 providers, downloads)",
      "✅ Accessibility (full suite)",
      "✅ Content export (Markdown, HTML, JSON, Anki, Quizlet)",
      "✅ Advanced reader (split-screen, translation, parallel texts)",
      "✅ Curriculum system",
      "✅ Forum system (basic)",
      "✅ Enhanced analytics"
    ],
    "completed_count": 153,
    "total_tasks": 174,
    "active_tasks": 21,
    "completion_percentage": 88
  },
  "tasks": [
    {
      "id": "cross-platform-001",
      "category": "cross-platform",
      "phase": "critical",
      "priority": "critical",
      "description": "Build Desktop application (Tauri)",
      "defer_to_next_sprint": false,
      "steps": [
        "Set up Tauri project structure in apps/desktop/",
        "Configure Tauri build process with tauri-cli",
        "Implement window management and menu bar",
        "Add tray icon and notifications",
        "Implement auto-updater",
        "Add file system integration (download management)",
        "Add keyboard shortcuts for desktop",
        "Configure code signing for macOS and Windows",
        "Build installers for macOS (DMG), Windows (NSIS), Linux (AppImage)",
        "Test on all three platforms",
        "Create desktop-specific features (drag-drop file import)",
        "Ensure feature parity with web app"
      ],
      "acceptance_criteria": [
        "Desktop app works on macOS, Windows, and Linux",
        "All web features available in desktop app",
        "Auto-updates work",
        "Offline mode fully functional",
        "Installers build successfully",
        "Code signing works for distribution",
        "Feature parity with web app"
      ],
      "passes": true
    },
    {
      "id": "cross-platform-002",
      "category": "cross-platform",
      "phase": "critical",
      "priority": "critical",
      "description": "Build Mobile applications (iOS & Android)",
      "defer_to_next_sprint": false,
      "steps": [
        "Set up React Native project in apps/mobile/",
        "Configure build systems (Xcode for iOS, Android Studio)",
        "Implement navigation using React Navigation",
        "Create mobile-optimized UI components",
        "Add touch gestures for reading (swipe, pinch-zoom)",
        "Implement mobile file picker for imports",
        "Add camera integration for document scanning",
        "Configure push notifications",
        "Add biometric authentication (Face ID, Touch ID, fingerprint)",
        "Implement offline storage with React Native AsyncStorage",
        "Add deep linking for shared content",
        "Configure app store metadata and screenshots",
        "Test on iOS (iPhone, iPad) and Android (phone, tablet)",
        "Ensure feature parity with web app"
      ],
      "acceptance_criteria": [
        "Apps work on iOS and Android",
        "All web features available in mobile apps",
        "Touch gestures work smoothly",
        "Offline mode fully functional",
        "Apps published to App Store and Play Store",
        "Biometric auth works",
        "Push notifications work",
        "Feature parity with web app"
      ],
      "passes": true
    },
    {
      "id": "social-bookclubs-001",
      "category": "social",
      "phase": "high-priority",
      "priority": "high",
      "description": "Build Book Clubs feature with scheduled discussions",
      "defer_to_next_sprint": false,
      "steps": [
        "Create BookClub model in database (id, name, description, creatorId, memberCount, isPublic, createdAt)",
        "Create BookClubMember model (clubId, userId, role: admin|moderator|member, joinedAt)",
        "Create BookClubBook model (clubId, bookId, startDate, endDate, currentPage, status)",
        "Create BookClubDiscussion model (clubId, bookId, title, scheduledAt, createdBy)",
        "Create BookClubPost model (discussionId, userId, content, createdAt, updatedAt)",
        "Build API endpoints: POST /api/book-clubs, GET /api/book-clubs, GET /api/book-clubs/:id",
        "Build API: POST /api/book-clubs/:id/join, DELETE /api/book-clubs/:id/leave",
        "Build API: POST /api/book-clubs/:id/books (add book to club)",
        "Build API: POST /api/book-clubs/:id/discussions (schedule discussion)",
        "Build API: GET /api/book-clubs/:id/discussions, POST /api/book-clubs/:id/discussions/:discussionId/posts",
        "Create BookClubsPage (browse and search clubs)",
        "Create BookClubDetailPage (view club, members, current book)",
        "Create BookClubDiscussionPage (scheduled discussion thread)",
        "Add calendar view for scheduled discussions",
        "Add email notifications for upcoming discussions",
        "Add club invitation system",
        "Write i18n translations for all book club features"
      ],
      "acceptance_criteria": [
        "Users can create public and private book clubs",
        "Users can join and leave clubs",
        "Admins can add books to club reading list",
        "Users can schedule discussions",
        "Discussion threads work with nested replies",
        "Calendar shows upcoming discussions",
        "Email reminders sent for discussions",
        "Tests pass for all book club APIs"
      ],
      "passes": true
    },
    {
      "id": "social-live-sessions-001",
      "category": "social",
      "phase": "high-priority",
      "priority": "medium",
      "description": "Build Live Reading Sessions feature",
      "defer_to_next_sprint": false,
      "steps": [
        "Create ReadingSession model (id, hostId, bookId, startTime, endTime, currentPage, participantCount)",
        "Create SessionParticipant model (sessionId, userId, joinedAt, leftAt, isActive)",
        "Create SessionMessage model (sessionId, userId, message, timestamp)",
        "Set up WebSocket server for real-time communication",
        "Build API: POST /api/reading-sessions (start session)",
        "Build API: POST /api/reading-sessions/:id/join",
        "Build API: WebSocket /ws/sessions/:id (real-time sync)",
        "Create LiveSessionPage component",
        "Add synchronized page turning (host controls, others follow)",
        "Add real-time chat sidebar",
        "Add presence indicators (who's online)",
        "Add synchronized highlighting (see others' cursors)",
        "Add session recording/replay feature",
        "Add session analytics (attendance, engagement)",
        "Write i18n translations for live sessions"
      ],
      "acceptance_criteria": [
        "Users can start live reading sessions",
        "Other users can join active sessions",
        "Page turns sync in real-time",
        "Chat works in real-time",
        "Presence indicators show online users",
        "Host can control session pace",
        "Tests pass for WebSocket connections"
      ],
      "passes": true
    },
    {
      "id": "social-ai-recommendations-001",
      "category": "social",
      "phase": "high-priority",
      "priority": "medium",
      "description": "Build AI-powered Social Recommendations Engine",
      "defer_to_next_sprint": false,
      "steps": [
        "Create recommendation scoring algorithm based on:",
        "  - Reading history similarity",
        "  - Genre preferences overlap",
        "  - Reading speed compatibility",
        "  - Social graph proximity",
        "  - Annotation similarity",
        "Build API: GET /api/recommendations/users (find similar readers)",
        "Build API: GET /api/recommendations/books-social (AI-enhanced book recommendations)",
        "Create UserSimilarity model (userId1, userId2, score, lastCalculated)",
        "Implement background job to calculate user similarities",
        "Add AI prompt for book recommendations based on social graph",
        "Create SocialRecommendationsPage component",
        "Add 'Readers like you' section",
        "Add 'Books trending in your network' section",
        "Add recommendation explanations (why this book/user)",
        "Cache recommendations for performance",
        "Write i18n translations"
      ],
      "acceptance_criteria": [
        "AI recommends similar readers based on behavior",
        "AI recommends books based on social graph + preferences",
        "Recommendations update daily",
        "Explanations provided for each recommendation",
        "Performance is acceptable (<500ms response time)",
        "Tests pass"
      ],
      "passes": true
    },
    {
      "id": "gamification-leaderboards-001",
      "category": "gamification",
      "phase": "high-priority",
      "priority": "high",
      "description": "Build Leaderboards (global, friends, groups)",
      "defer_to_next_sprint": false,
      "steps": [
        "Create Leaderboard model (id, type: global|friends|group, period: daily|weekly|monthly|alltime, updatedAt)",
        "Create LeaderboardEntry model (leaderboardId, userId, rank, score, metric: books|pages|time|streak)",
        "Build API: GET /api/leaderboards (list all leaderboards)",
        "Build API: GET /api/leaderboards/:type/:period (get leaderboard data)",
        "Implement leaderboard calculation background job",
        "Create LeaderboardsPage component",
        "Add tabs for Global, Friends, Groups",
        "Add period selector (Daily, Weekly, Monthly, All-Time)",
        "Add metric selector (Books Read, Pages Read, Time Reading, Streak)",
        "Add current user rank highlight",
        "Add rank change indicators (up/down arrows)",
        "Add achievement badges on leaderboard",
        "Add opt-out option for privacy",
        "Cache leaderboard data (5-minute cache)",
        "Write i18n translations"
      ],
      "acceptance_criteria": [
        "Global leaderboards show top 100 users",
        "Friends leaderboards show only followed users",
        "Group leaderboards show book club members",
        "Leaderboards update every 5 minutes",
        "Users can view their rank",
        "Privacy settings respected",
        "Tests pass"
      ],
      "passes": true
    },
    {
      "id": "forum-enhancements-001",
      "category": "forum",
      "phase": "medium-priority",
      "priority": "medium",
      "description": "Enhance Forum with advanced features",
      "defer_to_next_sprint": false,
      "steps": [
        "Add image upload support in forum posts",
        "Add file attachment support (PDF, EPUB for sharing excerpts)",
        "Implement Markdown editor with preview",
        "Add post voting system (upvote/downvote)",
        "Add 'Best Answer' marking for threads",
        "Add post editing with edit history",
        "Add moderation tools (pin, lock, delete posts)",
        "Add report/flag system for inappropriate content",
        "Add user reputation system based on votes",
        "Add forum badges (Helpful, Expert, etc.)",
        "Add forum search with advanced filters",
        "Add trending topics section",
        "Write i18n translations"
      ],
      "acceptance_criteria": [
        "Users can upload images in posts",
        "Markdown rendering works correctly",
        "Voting system works",
        "Best answers can be marked",
        "Moderators can manage content",
        "Tests pass"
      ],
      "passes": true
    },
    {
      "id": "monitoring-sentry-001",
      "category": "monitoring",
      "phase": "critical",
      "priority": "critical",
      "description": "Set up Sentry error tracking",
      "defer_to_next_sprint": false,
      "steps": [
        "Create Sentry account and project",
        "Install @sentry/nextjs and @sentry/node packages",
        "Configure Sentry in apps/web/sentry.client.config.ts",
        "Configure Sentry in apps/web/sentry.server.config.ts",
        "Configure Sentry in apps/api/sentry.config.ts",
        "Add sourcemap upload to build process",
        "Set up error boundaries in React app",
        "Add breadcrumbs for user actions",
        "Configure release tracking",
        "Set up alerting rules (email, Slack)",
        "Add custom error contexts (userId, bookId, etc.)",
        "Test error reporting in dev and production",
        "Create Sentry dashboard for monitoring"
      ],
      "acceptance_criteria": [
        "All frontend errors captured in Sentry",
        "All backend errors captured in Sentry",
        "Sourcemaps uploaded correctly",
        "User context attached to errors",
        "Alerts configured for critical errors",
        "Dashboard shows error trends"
      ],
      "passes": true
    },
    {
      "id": "monitoring-posthog-001",
      "category": "monitoring",
      "phase": "critical",
      "priority": "critical",
      "description": "Set up PostHog product analytics",
      "defer_to_next_sprint": false,
      "steps": [
        "Create PostHog account and project",
        "Install posthog-js package",
        "Configure PostHog in apps/web/src/lib/posthog.ts",
        "Add PostHog provider to app root",
        "Set up event tracking for key actions:",
        "  - Book import (by source)",
        "  - Reading session start/end",
        "  - Page turn events",
        "  - AI feature usage (by feature)",
        "  - Flashcard review completion",
        "  - Assessment completion",
        "  - Social interactions (follow, share, like)",
        "  - Feature adoption (TTS, split-screen, etc.)",
        "Set up funnels:",
        "  - Book import → First read → Completion",
        "  - Signup → First book → First annotation",
        "  - Free → Pro upgrade funnel",
        "Set up user properties (tier, reading level, preferences)",
        "Configure retention analysis",
        "Create PostHog dashboards for product team",
        "Set up A/B testing framework"
      ],
      "acceptance_criteria": [
        "All key events tracked",
        "Funnels set up and working",
        "User properties captured",
        "Dashboards created",
        "A/B testing framework ready",
        "No performance impact on app"
      ],
      "passes": true
    },
    {
      "id": "email-marketing-001",
      "category": "marketing",
      "phase": "high-priority",
      "priority": "high",
      "description": "Build email marketing funnel",
      "defer_to_next_sprint": false,
      "steps": [
        "Set up Resend or SendGrid account",
        "Create email templates (React Email):",
        "  - Welcome email (onboarding)",
        "  - First book import congratulations",
        "  - Reading streak reminders",
        "  - Flashcard review reminders",
        "  - Weekly reading summary",
        "  - Achievement unlocked notifications",
        "  - Feature discovery emails (TTS, AI, etc.)",
        "  - Pro upgrade promotions",
        "  - Re-engagement (inactive users)",
        "Build email sending API: POST /api/emails/send",
        "Create EmailLog model (track sent emails)",
        "Create email preference management page",
        "Implement unsubscribe functionality",
        "Set up email scheduling with cron jobs",
        "Add email analytics (opens, clicks)",
        "Test all email templates",
        "Configure email domain and SPF/DKIM",
        "Write email copy in all 6 languages"
      ],
      "acceptance_criteria": [
        "All email templates designed and working",
        "Emails send reliably",
        "Users can manage email preferences",
        "Unsubscribe works",
        "Analytics tracking opens and clicks",
        "Email domain configured correctly",
        "Tests pass"
      ],
      "passes": true
    },
    {
      "id": "payments-stripe-complete-001",
      "category": "payments",
      "phase": "critical",
      "priority": "high",
      "description": "Complete Stripe integration and subscription management",
      "defer_to_next_sprint": false,
      "steps": [
        "Create subscription management page (/settings/subscription)",
        "Add plan comparison table (Free vs Pro vs Scholar)",
        "Implement usage tracking and limits:",
        "  - Free: 5 books, basic AI, no TTS downloads",
        "  - Pro: 50 books, full AI, 5 TTS downloads/month",
        "  - Scholar: Unlimited everything",
        "Add usage indicators in UI (e.g., '3/5 books used')",
        "Implement soft limits (warnings before hard blocking)",
        "Add upgrade prompts when hitting limits",
        "Implement billing portal link",
        "Add invoice history page",
        "Implement subscription cancellation flow",
        "Add pause subscription feature",
        "Implement pro-rated upgrades/downgrades",
        "Add payment method management",
        "Test all subscription flows",
        "Add Stripe webhook handlers for all events",
        "Write tests for payment logic"
      ],
      "acceptance_criteria": [
        "Users can upgrade/downgrade/cancel",
        "Usage limits enforced correctly",
        "Billing portal works",
        "Webhooks handle all events",
        "Tests pass",
        "No payment bugs in production"
      ],
      "passes": true
    },
    {
      "id": "performance-optimization-001",
      "category": "performance",
      "phase": "medium-priority",
      "priority": "medium",
      "description": "Database optimization and query performance",
      "defer_to_next_sprint": false,
      "steps": [
        "Run EXPLAIN ANALYZE on slow queries",
        "Add database indexes for:",
        "  - User.email, User.username",
        "  - Book.userId, Book.status, Book.createdAt",
        "  - ReadingProgress.userId, ReadingProgress.bookId",
        "  - Annotation.bookId, Annotation.userId",
        "  - Flashcard.userId, Flashcard.nextReview",
        "  - UserFollow compound index (followerId, followingId)",
        "Implement connection pooling optimization",
        "Add query result caching with Redis",
        "Implement pagination for all list endpoints",
        "Add eager loading for related data",
        "Optimize N+1 queries",
        "Add database query logging in dev",
        "Run load tests with k6",
        "Monitor query performance in production"
      ],
      "acceptance_criteria": [
        "All critical queries < 100ms",
        "Database indexes created",
        "Connection pool configured",
        "Caching implemented",
        "Load tests pass",
        "No N+1 queries in production"
      ],
      "passes": true
    },
    {
      "id": "performance-cdn-001",
      "category": "performance",
      "phase": "medium-priority",
      "priority": "medium",
      "description": "Set up CDN for static assets",
      "defer_to_next_sprint": false,
      "steps": [
        "Configure Cloudflare CDN for R2 bucket",
        "Set up custom domain for CDN (cdn.readmaster.com)",
        "Add cache headers for static assets",
        "Implement image optimization pipeline",
        "Add lazy loading for images",
        "Implement progressive image loading (blur-up)",
        "Set up asset versioning/cache busting",
        "Configure CDN cache purging",
        "Test CDN performance across regions",
        "Monitor CDN analytics"
      ],
      "acceptance_criteria": [
        "CDN configured and working",
        "Assets load faster globally",
        "Images optimized automatically",
        "Cache invalidation works",
        "Performance metrics improved"
      ],
      "passes": true
    },
    {
      "id": "accessibility-screen-reader-001",
      "category": "accessibility",
      "phase": "medium-priority",
      "priority": "low",
      "description": "Optimize screen reader support",
      "defer_to_next_sprint": false,
      "steps": [
        "Audit all components with screen reader",
        "Add comprehensive ARIA labels",
        "Implement live regions for dynamic content",
        "Add skip links for all major sections",
        "Test with NVDA, JAWS, and VoiceOver",
        "Add screen reader mode toggle",
        "Implement reading order optimization",
        "Add audio descriptions for charts",
        "Test forms with screen readers",
        "Document screen reader keyboard shortcuts"
      ],
      "acceptance_criteria": [
        "All interactive elements have ARIA labels",
        "Screen reader navigation works smoothly",
        "Live regions announce changes",
        "Forms fully accessible",
        "Tests pass with screen reader tools"
      ],
      "passes": true
    },
    {
      "id": "accessibility-voice-commands-001",
      "category": "accessibility",
      "phase": "medium-priority",
      "priority": "low",
      "description": "Add voice command support",
      "defer_to_next_sprint": false,
      "steps": [
        "Integrate Web Speech API",
        "Define voice command vocabulary",
        "Implement voice commands for:",
        "  - Navigation (go to library, open book, etc.)",
        "  - Reading (next page, previous page, read aloud)",
        "  - Actions (add bookmark, create note, etc.)",
        "Add voice command feedback (visual + audio)",
        "Implement wake word detection",
        "Add voice command tutorial",
        "Test with different accents/languages",
        "Add voice command settings page",
        "Write i18n translations for commands"
      ],
      "acceptance_criteria": [
        "Voice commands work for core actions",
        "Commands recognized accurately",
        "Feedback provided for commands",
        "Works in multiple languages",
        "Tests pass"
      ],
      "passes": true
    },
    {
      "id": "content-podcast-001",
      "category": "content",
      "phase": "future",
      "priority": "low",
      "description": "Add podcast integration",
      "defer_to_next_sprint": false,
      "steps": [
        "Research podcast RSS feed parsing",
        "Create Podcast model (id, title, author, rssUrl, coverUrl)",
        "Create PodcastEpisode model (podcastId, title, description, audioUrl, duration)",
        "Build podcast import from RSS",
        "Create podcast player component",
        "Add podcast library view",
        "Implement playback controls",
        "Add podcast progress tracking",
        "Add show notes viewing",
        "Add episode transcripts if available",
        "Write i18n translations"
      ],
      "acceptance_criteria": [
        "Users can import podcasts via RSS",
        "Podcast player works",
        "Progress tracked",
        "Show notes displayed",
        "Tests pass"
      ],
      "passes": true
    },
    {
      "id": "content-video-001",
      "category": "content",
      "phase": "future",
      "priority": "low",
      "description": "Add video content support",
      "defer_to_next_sprint": false,
      "steps": [
        "Research video hosting options",
        "Create Video model (id, title, description, videoUrl, duration)",
        "Integrate video player (Video.js or Plyr)",
        "Add video transcript support",
        "Implement video progress tracking",
        "Add video annotations",
        "Create video library view",
        "Add video playback speed control",
        "Add closed captions support",
        "Write i18n translations"
      ],
      "acceptance_criteria": [
        "Users can import video content",
        "Video player works",
        "Transcripts displayed",
        "Progress tracked",
        "Tests pass"
      ],
      "passes": true
    },
    {
      "id": "ai-custom-models-001",
      "category": "ai",
      "phase": "future",
      "priority": "low",
      "description": "Allow custom AI model selection",
      "defer_to_next_sprint": false,
      "steps": [
        "Add model selection to AI settings",
        "Support multiple AI providers:",
        "  - Anthropic Claude (current)",
        "  - OpenAI GPT-4",
        "  - Google Gemini",
        "  - Open-source models via Ollama",
        "Add cost calculator per model",
        "Implement model switching API",
        "Add model comparison feature",
        "Cache model responses",
        "Monitor model performance",
        "Write i18n translations"
      ],
      "acceptance_criteria": [
        "Users can select AI model",
        "Multiple providers supported",
        "Cost calculator works",
        "Model switching seamless",
        "Tests pass"
      ],
      "passes": true
    },
    {
      "id": "ai-voice-interaction-001",
      "category": "ai",
      "phase": "future",
      "priority": "low",
      "description": "Add voice interaction with AI",
      "defer_to_next_sprint": false,
      "steps": [
        "Integrate speech-to-text API",
        "Integrate text-to-speech for AI responses",
        "Create voice chat UI",
        "Add voice recording controls",
        "Implement real-time transcription",
        "Add conversation history",
        "Support multiple languages",
        "Add voice command shortcuts",
        "Test voice quality",
        "Write i18n translations"
      ],
      "acceptance_criteria": [
        "Users can talk to AI",
        "AI responds with voice",
        "Transcription accurate",
        "Multiple languages supported",
        "Tests pass"
      ],
      "passes": true
    },
    {
      "id": "docs-user-guide-001",
      "category": "documentation",
      "phase": "high-priority",
      "priority": "medium",
      "description": "Create comprehensive user guide",
      "defer_to_next_sprint": false,
      "steps": [
        "Create /docs route for user documentation",
        "Write getting started guide",
        "Document all major features with screenshots",
        "Create video tutorials for key workflows",
        "Add interactive feature tour",
        "Create FAQ page",
        "Write troubleshooting guide",
        "Add keyboard shortcuts reference",
        "Create glossary of terms",
        "Translate all documentation to 6 languages"
      ],
      "acceptance_criteria": [
        "User guide covers all features",
        "Screenshots up-to-date",
        "Videos embedded",
        "Interactive tour works",
        "All languages covered"
      ],
      "passes": true
    },
    {
      "id": "docs-api-documentation-001",
      "category": "documentation",
      "phase": "medium-priority",
      "priority": "low",
      "description": "Create API documentation for developers",
      "defer_to_next_sprint": false,
      "steps": [
        "Set up API documentation with Swagger/OpenAPI",
        "Document all API endpoints",
        "Add request/response examples",
        "Document authentication flows",
        "Add rate limiting documentation",
        "Create API client examples (JavaScript, Python, cURL)",
        "Add webhooks documentation",
        "Create developer portal",
        "Add API changelog",
        "Publish API documentation publicly"
      ],
      "acceptance_criteria": [
        "All APIs documented",
        "Examples provided",
        "Documentation up-to-date",
        "Developer portal live",
        "Tests pass"
      ],
      "passes": true
    }
  ]
}
