{
  "project": {
    "name": "Read Master",
    "description": "AI-powered reading comprehension platform",
    "quality_standard": "Production code. Must be maintainable, testable, and follow best practices. This codebase will outlive you - fight entropy, leave it better than you found it.",
    "completion_criteria": "All active sprint tasks (defer_to_next_sprint: false) have passes: true, all tests pass, TypeScript has no errors, linting passes"
  },
  "feedback_loops": {
    "required": ["typecheck", "lint", "test"],
    "commands": {
      "typecheck": "pnpm typecheck",
      "lint": "pnpm lint",
      "test": "pnpm vitest run"
    },
    "enforcement": "Do NOT commit if any feedback loop fails. Fix issues first."
  },
  "sprint_info": {
    "description": "Remaining tasks to complete Read Master MVP. Focus on monitoring, analytics, email marketing, and enhancements.",
    "current_sprint_focus": "Sentry error tracking, PostHog analytics, email marketing funnel, library enhancements, payment integration, accessibility, and native apps",
    "completed_count": 99,
    "total_tasks": 138,
    "active_tasks": 39,
    "new_tasks_added": 39
  },
  "tasks": [
    {
      "id": "library-filters-001",
      "category": "library",
      "phase": "high-priority",
      "priority": "critical",
      "description": "Complete advanced library filtering system",
      "defer_to_next_sprint": false,
      "steps": [
        "Add filter by reading progress percentage ranges (0-25%, 26-50%, 51-75%, 76-99%, 100%)",
        "Add filter by file type (EPUB, PDF, DOC, DOCX, TXT, HTML)",
        "Add filter by source (Upload, URL, Paste, Google Books, Open Library)",
        "Add filter by date added/started/completed with date pickers",
        "Implement combine multiple filters logic",
        "Add save search queries feature (favorite filters)",
        "Create FilterPresets model in database",
        "Update LibraryFilters component with new filter options",
        "Add filter pills/chips to show active filters",
        "Add clear all filters button",
        "Persist filter state in URL query params",
        "Write comprehensive tests for all filter combinations"
      ],
      "acceptance_criteria": [
        "All filter types work independently",
        "Multiple filters can be combined",
        "Filter presets can be saved and loaded",
        "URL reflects current filter state",
        "Filter state persists across page reloads",
        "Clear filters button resets all filters",
        "Tests cover all filter combinations"
      ],
      "passes": true
    },
    {
      "id": "tts-downloads-001",
      "category": "tts",
      "phase": "high-priority",
      "priority": "critical",
      "description": "Implement TTS audio file downloads for Pro/Scholar tiers",
      "defer_to_next_sprint": false,
      "steps": [
        "Create POST /api/tts/generate-audio endpoint",
        "Implement server-side audio generation using OpenAI TTS",
        "Implement server-side audio generation using ElevenLabs",
        "Store generated audio files in R2 with expiration",
        "Create DownloadedAudio model in database",
        "Track download limits per tier (Pro: 5/month, Scholar: unlimited)",
        "Add download button to reader TTS controls",
        "Add download progress indicator",
        "Add downloads management page to show all downloaded audio",
        "Support MP3 and M4A formats",
        "Add download expiration (30 days) and cleanup cron job",
        "Write tests for download limits and generation"
      ],
      "acceptance_criteria": [
        "Pro users can download 5 books/month",
        "Scholar users have unlimited downloads",
        "Audio files are stored in R2",
        "Downloads expire after 30 days",
        "Both MP3 and M4A formats supported",
        "Download progress shows correctly",
        "Download limits are enforced",
        "Tests pass"
      ],
      "passes": true
    },
    {
      "id": "ai-personality-001",
      "category": "ai",
      "phase": "high-priority",
      "priority": "high",
      "description": "Create AI personality customization UI",
      "defer_to_next_sprint": false,
      "steps": [
        "Create SettingsAIPage component",
        "Add personality selector (Encouraging Tutor, Neutral Assistant, Socratic Guide)",
        "Add custom tone text input",
        "Add verbosity level slider (Concise to Detailed)",
        "Add language complexity selector (Match my level, Challenge me, Simplify)",
        "Add proactive suggestions toggle",
        "Add comprehension check frequency selector (Never, Sometimes, Always)",
        "Store AI preferences in User.preferences JSON field",
        "Update AI prompt templates to use personality settings",
        "Add preview feature to test AI personality",
        "Add reset to defaults button",
        "Write tests for settings persistence"
      ],
      "acceptance_criteria": [
        "All personality options are selectable",
        "Settings save to database correctly",
        "AI responses adapt to personality settings",
        "Preview shows difference between personalities",
        "Settings persist across sessions",
        "Tests pass"
      ],
      "passes": false
    },
    {
      "id": "email-001",
      "category": "email-marketing",
      "phase": "high-priority",
      "priority": "high",
      "description": "Set up email service provider integration and database models",
      "defer_to_next_sprint": false,
      "steps": [
        "Choose email service provider (SendGrid recommended)",
        "Create SendGrid account and get API key",
        "Set up domain authentication (SPF, DKIM, DMARC)",
        "Create EmailPreferences model in Prisma schema",
        "Create EmailCampaign model in Prisma schema",
        "Create EmailLog model in Prisma schema",
        "Add EmailFrequency, CampaignType, CampaignStatus, EmailStatus, BounceType enums",
        "Run database migration",
        "Create email service wrapper in apps/api/src/services/email.ts",
        "Implement sendEmail function",
        "Implement webhook handler for email events",
        "Create POST /api/email/webhook endpoint",
        "Handle delivered, opened, clicked, bounced, unsubscribed events",
        "Update EmailLog records based on webhooks",
        "Add email service configuration to env variables",
        "Write comprehensive tests"
      ],
      "acceptance_criteria": [
        "Email service provider is configured",
        "Domain authentication is complete",
        "Database models are created",
        "Email can be sent via API",
        "Webhooks are processed correctly",
        "Email status is tracked in database",
        "Tests verify all functionality"
      ],
      "passes": false
    },
    {
      "id": "email-002",
      "category": "email-marketing",
      "phase": "high-priority",
      "priority": "high",
      "description": "Create email templates and template system",
      "defer_to_next_sprint": false,
      "steps": [
        "Set up email template directory structure",
        "Create base email layout template (HTML + plain text)",
        "Add responsive CSS framework (MJML or Foundation for Emails)",
        "Create template for welcome email",
        "Create template for onboarding emails (7 variations)",
        "Create template for streak reminders",
        "Create template for achievement notifications",
        "Create template for weekly digest",
        "Create template for re-engagement emails (4 variations)",
        "Create template for conversion emails (4 variations)",
        "Create template for newsletter",
        "Add personalization variable support ({{firstName}}, etc.)",
        "Add dynamic content blocks",
        "Implement template rendering engine",
        "Test templates across email clients (Litmus or Email on Acid)",
        "Ensure dark mode support",
        "Add unsubscribe footer to all templates",
        "Write template rendering tests"
      ],
      "acceptance_criteria": [
        "All email templates are created",
        "Templates are responsive on mobile",
        "Dark mode works correctly",
        "Personalization variables work",
        "Templates render correctly in major email clients",
        "Unsubscribe link is present in all templates",
        "Tests pass"
      ],
      "passes": false
    },
    {
      "id": "email-003",
      "category": "email-marketing",
      "phase": "high-priority",
      "priority": "high",
      "description": "Implement welcome and onboarding email sequence",
      "defer_to_next_sprint": false,
      "steps": [
        "Create email trigger system in apps/api/src/services/emailTriggers.ts",
        "Implement event listener for user.created",
        "Send welcome email immediately on signup",
        "Create cron job to check for day 1 onboarding trigger",
        "Send 'Add first book' email on day 1",
        "Create cron job to check for day 2 onboarding trigger",
        "Send 'AI features' email on day 2",
        "Create cron job to check for day 3 onboarding trigger",
        "Send 'Progress tracking' email on day 3",
        "Create cron job to check for day 5 onboarding trigger",
        "Send 'Social features' email on day 5",
        "Create cron job to check for day 7 onboarding trigger",
        "Send 'Week 1 recap' email with user stats on day 7",
        "Create cron job to check for day 14 onboarding trigger",
        "Send 'Pro features preview' email on day 14",
        "Ensure emails respect user preferences",
        "Track email opens and clicks",
        "Write tests for onboarding sequence"
      ],
      "acceptance_criteria": [
        "Welcome email sends immediately",
        "All onboarding emails send on schedule",
        "Emails are personalized with user data",
        "User preferences are respected",
        "Email tracking works",
        "Cron jobs run reliably",
        "Tests verify all triggers"
      ],
      "passes": false
    },
    {
      "id": "email-004",
      "category": "email-marketing",
      "phase": "high-priority",
      "priority": "high",
      "description": "Implement engagement email campaigns",
      "defer_to_next_sprint": false,
      "steps": [
        "Create trigger for reading streak achievements (7, 30, 100, 365 days)",
        "Send streak celebration email",
        "Create trigger for book completion",
        "Send book completion celebration email",
        "Create trigger for achievement unlocked",
        "Send achievement notification email",
        "Create cron job for weekly digest (Monday 8am per timezone)",
        "Generate weekly reading stats for digest",
        "Send weekly digest email",
        "Create trigger for milestone achievements (10 books, 100 flashcards, etc.)",
        "Send milestone celebration email",
        "Add social sharing links to celebration emails",
        "Ensure all engagement emails respect preferences",
        "Write tests for engagement triggers"
      ],
      "acceptance_criteria": [
        "Streak emails send on achievement",
        "Book completion emails send correctly",
        "Achievement emails send on unlock",
        "Weekly digest generates and sends",
        "Milestone emails send correctly",
        "All emails are personalized",
        "Preferences are respected",
        "Tests pass"
      ],
      "passes": false
    },
    {
      "id": "email-005",
      "category": "email-marketing",
      "phase": "high-priority",
      "priority": "high",
      "description": "Implement re-engagement campaigns for inactive users",
      "defer_to_next_sprint": false,
      "steps": [
        "Create cron job to identify inactive users (runs daily)",
        "Implement 3-day inactive detection and email",
        "Send 'We miss you' email with pending flashcards count",
        "Implement 7-day inactive detection and email",
        "Send 'Streak reminder' email with one-click resume link",
        "Implement 14-day inactive detection and email",
        "Send 'What's stopping you?' email with survey link",
        "Create simple survey page for inactive user feedback",
        "Implement 30-day inactive detection and email",
        "Send final re-engagement email with special offer",
        "Track re-engagement email effectiveness",
        "Add unsubscribe option prominent in re-engagement emails",
        "Ensure users don't get duplicate re-engagement emails",
        "Write tests for inactive user detection and emails"
      ],
      "acceptance_criteria": [
        "Inactive users are detected correctly",
        "Re-engagement emails send on schedule",
        "Email timing is accurate (3, 7, 14, 30 days)",
        "Survey page works",
        "No duplicate emails sent",
        "Unsubscribe is easy",
        "Tests verify all scenarios"
      ],
      "passes": false
    },
    {
      "id": "email-006",
      "category": "email-marketing",
      "phase": "high-priority",
      "priority": "high",
      "description": "Implement conversion campaigns for free tier users",
      "defer_to_next_sprint": false,
      "steps": [
        "Create trigger for library limit reached (3 books)",
        "Send upgrade prompt email highlighting Pro benefits",
        "Create trigger for AI interaction limit reached (5 per day)",
        "Send AI upgrade email showing Pro/Scholar benefits",
        "Create 7-day free tier check",
        "Send feature discovery email highlighting locked features",
        "Create 14-day free tier check",
        "Calculate user value (books, AI calls, flashcards used)",
        "Send value demonstration email with upgrade ROI",
        "Include success stories from Pro users",
        "Add clear upgrade CTAs with tracking",
        "Implement conversion tracking from email to upgrade",
        "A/B test different subject lines and content",
        "Write tests for conversion triggers"
      ],
      "acceptance_criteria": [
        "Library limit email sends correctly",
        "AI limit email sends correctly",
        "Feature discovery email sends at 7 days",
        "Value demonstration email sends at 14 days",
        "Conversion tracking works",
        "A/B testing framework works",
        "Upgrade CTAs are tracked",
        "Tests pass"
      ],
      "passes": false
    },
    {
      "id": "email-007",
      "category": "email-marketing",
      "phase": "high-priority",
      "priority": "medium",
      "description": "Create email preferences management page",
      "defer_to_next_sprint": false,
      "steps": [
        "Create SettingsEmailPage component",
        "Display current email preferences",
        "Add toggle for onboarding emails",
        "Add toggle for engagement emails",
        "Add toggle for re-engagement emails",
        "Add toggle for marketing emails",
        "Add toggle for newsletter",
        "Add toggle for achievement notifications",
        "Add toggle for weekly digest",
        "Add email frequency selector (immediate, daily, weekly)",
        "Add preferred send time picker",
        "Create PUT /api/users/email-preferences endpoint",
        "Save preferences to EmailPreferences model",
        "Create one-click unsubscribe endpoint",
        "Add resubscribe functionality",
        "Ensure all email sends respect preferences",
        "Write tests for preferences page"
      ],
      "acceptance_criteria": [
        "All email preferences are configurable",
        "Preferences save correctly",
        "Unsubscribe works with one click",
        "Resubscribe works",
        "Email sends respect preferences",
        "UI is intuitive",
        "Tests pass"
      ],
      "passes": false
    },
    {
      "id": "email-008",
      "category": "email-marketing",
      "phase": "high-priority",
      "priority": "medium",
      "description": "Implement email analytics dashboard for admin",
      "defer_to_next_sprint": false,
      "steps": [
        "Create AdminEmailAnalyticsPage component",
        "Display total emails sent (all time, 30 days)",
        "Show open rate percentage and chart",
        "Show click-through rate percentage and chart",
        "Show conversion rate (email to upgrade)",
        "Show unsubscribe rate",
        "Show bounce rate (hard and soft)",
        "Show spam complaint rate",
        "Create campaign performance table",
        "Add filter by campaign type",
        "Add filter by date range",
        "Show top performing emails",
        "Show worst performing emails",
        "Create email funnel visualization",
        "Add export to CSV functionality",
        "Create GET /api/admin/analytics/email endpoint",
        "Write tests for analytics calculations"
      ],
      "acceptance_criteria": [
        "All email metrics are displayed",
        "Charts render correctly",
        "Filters work",
        "Campaign comparison works",
        "Export to CSV works",
        "Data is accurate",
        "Tests pass"
      ],
      "passes": false
    },
    {
      "id": "email-009",
      "category": "email-marketing",
      "phase": "high-priority",
      "priority": "medium",
      "description": "Implement newsletter system",
      "defer_to_next_sprint": false,
      "steps": [
        "Create AdminNewsletterPage for composing newsletters",
        "Add rich text editor (TipTap or similar)",
        "Support newsletter sections (intro, tips, features, stories, etc.)",
        "Add image upload for newsletter",
        "Create preview functionality",
        "Add send test email feature",
        "Implement newsletter scheduling",
        "Create recipient segmentation selector",
        "Store newsletter in EmailCampaign model",
        "Create cron job to send scheduled newsletters",
        "Send to newsletter subscribers only",
        "Track newsletter performance",
        "Add newsletter archive page (public)",
        "Create POST /api/admin/newsletter endpoint",
        "Write tests for newsletter system"
      ],
      "acceptance_criteria": [
        "Newsletter can be composed in admin panel",
        "Rich text editing works",
        "Preview shows accurate rendering",
        "Test emails can be sent",
        "Newsletters can be scheduled",
        "Segmentation works",
        "Archive is accessible",
        "Tests pass"
      ],
      "passes": false
    },
    {
      "id": "email-010",
      "category": "email-marketing",
      "phase": "high-priority",
      "priority": "low",
      "description": "Implement email segmentation system",
      "defer_to_next_sprint": false,
      "steps": [
        "Create segment builder UI in admin panel",
        "Support segment by user tier (Free, Pro, Scholar)",
        "Support segment by engagement level (active, inactive, at-risk)",
        "Support segment by reading behavior (frequency, genres)",
        "Support segment by feature usage (AI, SRS, social)",
        "Support segment by lifecycle stage (new, active, churned)",
        "Support segment by geography/timezone",
        "Allow combining multiple criteria",
        "Save custom segments to database",
        "Create Segment model in Prisma",
        "Implement segment evaluation engine",
        "Show segment size preview",
        "Allow targeting campaigns to segments",
        "Write tests for segmentation logic"
      ],
      "acceptance_criteria": [
        "Segments can be created with multiple criteria",
        "Segment size is calculated accurately",
        "Segments can be saved and reused",
        "Campaigns can target segments",
        "Segment evaluation is performant",
        "Tests pass"
      ],
      "passes": false
    },
    {
      "id": "email-011",
      "category": "email-marketing",
      "phase": "high-priority",
      "priority": "low",
      "description": "Implement A/B testing for emails",
      "defer_to_next_sprint": false,
      "steps": [
        "Add A/B test configuration to EmailCampaign model",
        "Support testing subject lines (A vs B)",
        "Support testing email content (A vs B)",
        "Support testing send times",
        "Split recipients into test groups (50/50 or custom)",
        "Send test variant A to first group",
        "Send test variant B to second group",
        "Track performance of each variant",
        "Calculate statistical significance",
        "Display A/B test results in admin dashboard",
        "Auto-select winner after threshold reached",
        "Support multi-variant testing (A/B/C)",
        "Write tests for A/B testing logic"
      ],
      "acceptance_criteria": [
        "A/B tests can be configured",
        "Recipients are split correctly",
        "Both variants send",
        "Performance is tracked separately",
        "Statistical significance is calculated",
        "Winner selection works",
        "Tests pass"
      ],
      "passes": false
    },
    {
      "id": "sentry-001",
      "category": "monitoring",
      "phase": "high-priority",
      "priority": "critical",
      "description": "Integrate Sentry for error tracking and performance monitoring",
      "defer_to_next_sprint": false,
      "steps": [
        "Create Sentry account and projects (web, api)",
        "Install @sentry/react in apps/web",
        "Install @sentry/node in apps/api",
        "Configure Sentry in apps/web/src/main.tsx",
        "Add Sentry.init with DSN, environment, integrations",
        "Configure BrowserTracing integration",
        "Configure Replay integration for session recordings",
        "Set up source maps for production builds",
        "Configure Vite to upload source maps to Sentry",
        "Configure Sentry in apps/api",
        "Add Sentry error boundary to React app",
        "Wrap all API endpoints with Sentry error handler",
        "Configure context data (user, tags, extras)",
        "Set up release tracking with git commits",
        "Configure performance monitoring (tracesSampleRate)",
        "Add custom error tags (tier, feature, page)",
        "Set up alerts for critical errors (Slack/email)",
        "Configure error grouping rules",
        "Add breadcrumbs for user actions",
        "Test error reporting in development",
        "Add SENTRY_DSN to environment variables",
        "Write documentation for Sentry usage"
      ],
      "acceptance_criteria": [
        "Errors are captured from frontend",
        "Errors are captured from backend API",
        "Source maps are uploaded correctly",
        "User context is included in errors",
        "Performance traces are captured",
        "Releases are tracked with git SHA",
        "Alerts are sent for critical errors",
        "Error grouping works correctly",
        "Session replays are available",
        "Documentation is complete"
      ],
      "passes": true
    },
    {
      "id": "sentry-002",
      "category": "monitoring",
      "phase": "high-priority",
      "priority": "high",
      "description": "Set up Sentry performance monitoring and optimization",
      "defer_to_next_sprint": false,
      "steps": [
        "Configure transaction sampling strategy",
        "Add custom spans for database queries",
        "Add custom spans for external API calls (AI, TTS)",
        "Track API endpoint performance",
        "Track component render performance",
        "Set up performance budgets",
        "Create performance dashboard in Sentry",
        "Configure alerts for slow transactions (>3s)",
        "Configure alerts for high error rates (>5%)",
        "Track Core Web Vitals (LCP, FID, CLS)",
        "Add performance monitoring to reader interface",
        "Track EPUB/PDF rendering performance",
        "Track flashcard review performance",
        "Identify and tag slow queries",
        "Set up custom metrics for business logic",
        "Write performance optimization guide"
      ],
      "acceptance_criteria": [
        "All API endpoints are traced",
        "Database queries are tracked",
        "External API calls are monitored",
        "Core Web Vitals are captured",
        "Slow transactions trigger alerts",
        "Performance dashboard is useful",
        "Optimization guide is documented"
      ],
      "passes": false
    },
    {
      "id": "posthog-001",
      "category": "analytics",
      "phase": "high-priority",
      "priority": "critical",
      "description": "Integrate PostHog for product analytics and feature flags",
      "defer_to_next_sprint": false,
      "steps": [
        "Create PostHog account (or set up self-hosted)",
        "Install posthog-js in apps/web",
        "Initialize PostHog in apps/web/src/lib/analytics.ts",
        "Configure autocapture for clicks and pageviews",
        "Set up user identification with Clerk user ID",
        "Create event tracking wrapper functions",
        "Track key user events (signup, login, book_added, book_completed)",
        "Track reading session events (start, pause, resume, complete)",
        "Track AI feature usage (explain, chat, assessment, flashcards)",
        "Track SRS events (card_reviewed, streak_updated)",
        "Track social events (follow, group_join, post_created)",
        "Track conversion events (upgrade_initiated, upgrade_completed)",
        "Set up custom properties (tier, reading_level, streak)",
        "Configure session recording with privacy settings",
        "Mask sensitive data (passwords, emails, credit cards)",
        "Set up feature flags infrastructure",
        "Create feature flag for new features rollout",
        "Add POSTHOG_KEY to environment variables",
        "Test event tracking in development",
        "Write analytics tracking guide"
      ],
      "acceptance_criteria": [
        "PostHog is initialized correctly",
        "User identification works",
        "All key events are tracked",
        "Custom properties are included",
        "Session recordings capture user behavior",
        "Sensitive data is masked",
        "Feature flags can be toggled",
        "Documentation is complete"
      ],
      "passes": false
    },
    {
      "id": "posthog-002",
      "category": "analytics",
      "phase": "high-priority",
      "priority": "high",
      "description": "Implement PostHog funnels, cohorts, and experimentation",
      "defer_to_next_sprint": false,
      "steps": [
        "Create onboarding funnel in PostHog",
        "Track steps: signup -> add_book -> start_reading -> complete_chapter",
        "Create conversion funnel (free -> upgrade_view -> upgrade_complete)",
        "Create reading engagement funnel",
        "Set up cohorts for user segmentation",
        "Create cohort: Active readers (read 3+ times/week)",
        "Create cohort: At-risk users (no activity 7+ days)",
        "Create cohort: Power users (Pro/Scholar, daily active)",
        "Create cohort: Free tier users (hit limits)",
        "Set up A/B tests for key features",
        "Implement A/B test: Email subject lines",
        "Implement A/B test: Onboarding flow variations",
        "Implement A/B test: Upgrade CTA placement",
        "Create conversion dashboards",
        "Set up retention analysis",
        "Configure insights and trends",
        "Set up automated reports",
        "Write experimentation playbook"
      ],
      "acceptance_criteria": [
        "All funnels are created and tracking",
        "Cohorts are defined and updating",
        "A/B tests can be run",
        "Conversion rates are visible",
        "Retention is tracked over time",
        "Insights are actionable",
        "Playbook is documented"
      ],
      "passes": false
    },
    {
      "id": "posthog-003",
      "category": "analytics",
      "phase": "high-priority",
      "priority": "high",
      "description": "Integrate PostHog feature flags with application",
      "defer_to_next_sprint": false,
      "steps": [
        "Create feature flag service in apps/web/src/lib/featureFlags.ts",
        "Implement useFeatureFlag hook",
        "Add feature flag loading state handling",
        "Create feature flags for experimental features",
        "Flag: new_reader_interface (gradual rollout)",
        "Flag: advanced_ai_features (Pro/Scholar only)",
        "Flag: beta_mobile_app (invite only)",
        "Flag: new_onboarding_flow (A/B test)",
        "Implement flag-based conditional rendering",
        "Add admin toggle to override flags (for testing)",
        "Set up flag analytics (usage, impact)",
        "Create flag documentation in code",
        "Implement graceful fallbacks",
        "Add flag status to admin dashboard",
        "Test flag toggles in development",
        "Write feature flag best practices guide"
      ],
      "acceptance_criteria": [
        "Feature flags control feature visibility",
        "Flags can be toggled in PostHog dashboard",
        "Gradual rollouts work correctly",
        "A/B tests use flags",
        "Flags are documented",
        "Admin can see flag status",
        "Best practices guide is complete"
      ],
      "passes": false
    },
    {
      "id": "analytics-integration-001",
      "category": "analytics",
      "phase": "high-priority",
      "priority": "medium",
      "description": "Create unified analytics dashboard combining all data sources",
      "defer_to_next_sprint": false,
      "steps": [
        "Create AdminAnalyticsOverviewPage combining all sources",
        "Display Sentry error rate and trending errors",
        "Display PostHog top events and conversion funnels",
        "Display in-house business metrics (revenue, growth)",
        "Create unified health score calculation",
        "Combine error rate + engagement + revenue into score",
        "Add quick links to Sentry and PostHog dashboards",
        "Create alerts system using combined data",
        "Alert: High error rate + low engagement = critical issue",
        "Alert: Spike in events + no errors = viral growth",
        "Alert: High churn + errors in specific feature = investigate",
        "Create API endpoint to fetch combined metrics",
        "Add data refresh/sync functionality",
        "Create weekly executive summary email",
        "Include key metrics from all sources",
        "Add trend indicators (up/down/stable)",
        "Write analytics interpretation guide"
      ],
      "acceptance_criteria": [
        "All three data sources are visible",
        "Health score updates in real-time",
        "Alerts fire based on combined data",
        "Executive summary emails send weekly",
        "Dashboard is actionable",
        "Interpretation guide is clear"
      ],
      "passes": false
    },
    {
      "id": "analytics-integration-002",
      "category": "analytics",
      "phase": "high-priority",
      "priority": "medium",
      "description": "Implement analytics-driven automated actions",
      "defer_to_next_sprint": false,
      "steps": [
        "Create analytics automation service",
        "Implement: High error rate -> Pause feature rollout",
        "Implement: Low conversion in funnel -> Trigger re-engagement email",
        "Implement: User inactive 7 days -> Add to re-engagement cohort",
        "Implement: Crash on specific device -> Notify team immediately",
        "Implement: A/B test reaches significance -> Auto-select winner",
        "Implement: Performance degradation -> Scale infrastructure",
        "Create automation rules engine",
        "Add rule: IF error_rate > 5% THEN alert + rollback",
        "Add rule: IF funnel_conversion < 10% THEN optimize",
        "Add rule: IF session_recording shows confusion THEN improve UX",
        "Set up automated performance regression testing",
        "Create automated health checks",
        "Log all automated actions for audit",
        "Add manual override for automations",
        "Write automation playbook"
      ],
      "acceptance_criteria": [
        "Automations respond to analytics data",
        "Feature rollouts can be paused automatically",
        "Re-engagement is triggered automatically",
        "A/B test winners are selected automatically",
        "All actions are logged",
        "Manual override works",
        "Playbook documents all automations"
      ],
      "passes": false
    },
    {
      "id": "payments-001",
      "category": "payments",
      "phase": "high-priority",
      "priority": "critical",
      "description": "Implement Stripe payment integration",
      "defer_to_next_sprint": false,
      "steps": [
        "Set up Stripe account and get API keys",
        "Create Stripe products for Pro and Scholar tiers",
        "Create POST /api/payments/create-checkout-session endpoint",
        "Create POST /api/payments/webhook endpoint for Stripe events",
        "Handle subscription.created webhook",
        "Handle subscription.updated webhook",
        "Handle subscription.deleted webhook",
        "Handle invoice.payment_succeeded webhook",
        "Handle invoice.payment_failed webhook",
        "Create upgrade flow UI in SettingsSubscriptionPage",
        "Create Stripe customer portal link",
        "Add billing history display",
        "Add cancel subscription flow with confirmation",
        "Update DailyAnalytics to track revenue from Stripe",
        "Add payment method management",
        "Write comprehensive webhook tests"
      ],
      "acceptance_criteria": [
        "Users can upgrade to Pro or Scholar",
        "Payments are processed via Stripe",
        "User tier is updated after successful payment",
        "Webhooks handle all subscription events",
        "Users can manage billing in customer portal",
        "Cancel subscription works with proper off-boarding",
        "Revenue is tracked in analytics",
        "Tests verify all webhook scenarios"
      ],
      "passes": false
    },
    {
      "id": "accessibility-audit-001",
      "category": "accessibility",
      "phase": "high-priority",
      "priority": "high",
      "description": "Conduct full WCAG 2.2 AAA accessibility audit",
      "defer_to_next_sprint": false,
      "steps": [
        "Run automated accessibility testing (axe-core, WAVE)",
        "Test with screen readers (NVDA, JAWS, VoiceOver)",
        "Verify keyboard navigation on all pages",
        "Check color contrast ratios (7:1 for AAA)",
        "Verify focus indicators are visible",
        "Test skip navigation links",
        "Verify all images have alt text",
        "Check form labels and error messages",
        "Test with 200% zoom and 400% zoom",
        "Verify touch targets are 44x44px minimum",
        "Test reduced motion preferences",
        "Document all issues found",
        "Fix all critical and high-priority issues",
        "Create accessibility statement page",
        "Add keyboard shortcuts help page"
      ],
      "acceptance_criteria": [
        "All automated tests pass",
        "Screen readers can navigate all features",
        "Keyboard navigation works everywhere",
        "All color contrasts meet 7:1 ratio",
        "Focus indicators are clearly visible",
        "No content loss at 400% zoom",
        "All touch targets meet minimum size",
        "Accessibility statement is published"
      ],
      "passes": false
    },
    {
      "id": "reader-two-page-001",
      "category": "reader",
      "phase": "high-priority",
      "priority": "medium",
      "description": "Implement two-page spread view for desktop",
      "defer_to_next_sprint": false,
      "steps": [
        "Add spread mode toggle to reader settings",
        "Update EpubReader to support spread: 'auto' mode",
        "Update PdfReader to render two pages side-by-side",
        "Add responsive breakpoint (only enable on desktop)",
        "Ensure pagination works correctly in spread mode",
        "Update progress tracking for spread view",
        "Add keyboard shortcuts ([ ] to toggle spread)",
        "Persist spread preference per user",
        "Handle odd page counts gracefully",
        "Write tests for spread mode"
      ],
      "acceptance_criteria": [
        "Two-page spread works for EPUB",
        "Two-page spread works for PDF",
        "Only available on desktop (>1200px width)",
        "Page navigation works in spread mode",
        "Progress tracking is accurate",
        "Preference persists across sessions",
        "Tests pass"
      ],
      "passes": false
    },
    {
      "id": "reader-column-width-001",
      "category": "reader",
      "phase": "high-priority",
      "priority": "medium",
      "description": "Add column width control to reader",
      "defer_to_next_sprint": false,
      "steps": [
        "Add column width slider to typography settings",
        "Implement max-width control (400px - 1200px)",
        "Add preset widths (Narrow, Medium, Wide, Full)",
        "Apply column width to EPUB reader",
        "Apply column width to text reader",
        "Center content when width is constrained",
        "Persist column width preference",
        "Add to reader settings panel",
        "Write tests"
      ],
      "acceptance_criteria": [
        "Column width can be adjusted",
        "Presets work correctly",
        "Width applies to all reader types",
        "Content is centered properly",
        "Preference persists",
        "Tests pass"
      ],
      "passes": false
    },
    {
      "id": "library-bulk-001",
      "category": "library",
      "phase": "medium-priority",
      "priority": "medium",
      "description": "Implement bulk operations for library management",
      "defer_to_next_sprint": false,
      "steps": [
        "Add multi-select checkboxes to LibraryPage",
        "Add select all/deselect all buttons",
        "Create bulk actions toolbar (appears when items selected)",
        "Implement bulk add to collection",
        "Implement bulk add to shelf",
        "Implement bulk change status",
        "Implement bulk add tags",
        "Implement bulk delete with confirmation dialog",
        "Add progress indicator for bulk operations",
        "Create POST /api/books/bulk-update endpoint",
        "Add undo feature for accidental bulk operations",
        "Write tests for all bulk operations"
      ],
      "acceptance_criteria": [
        "Multiple books can be selected",
        "Bulk add to collection works",
        "Bulk status change works",
        "Bulk tag addition works",
        "Bulk delete requires confirmation",
        "Progress is shown for long operations",
        "Undo works for recent operations",
        "Tests pass"
      ],
      "passes": false
    },
    {
      "id": "library-reading-lists-001",
      "category": "library",
      "phase": "medium-priority",
      "priority": "medium",
      "description": "Complete reading lists functionality",
      "defer_to_next_sprint": false,
      "steps": [
        "Verify ReadingListsPage component functionality",
        "Verify ReadingListDetailPage component functionality",
        "Create ReadingList model in database if missing",
        "Implement ordered list of books",
        "Add drag-and-drop reordering",
        "Add shareable reading list links",
        "Add reading list privacy settings (Private, Unlisted, Public)",
        "Add reading list discovery page",
        "Add follow/save reading lists from others",
        "Track progress through reading lists",
        "Write comprehensive tests"
      ],
      "acceptance_criteria": [
        "Reading lists can be created",
        "Books can be reordered",
        "Lists can be shared via link",
        "Public lists are discoverable",
        "Progress tracking works",
        "Tests pass"
      ],
      "passes": false
    },
    {
      "id": "reader-search-001",
      "category": "reader",
      "phase": "medium-priority",
      "priority": "medium",
      "description": "Implement search within book feature",
      "defer_to_next_sprint": false,
      "steps": [
        "Add search icon to reader toolbar",
        "Create search modal/panel component",
        "Implement full-text search for EPUB",
        "Implement full-text search for PDF",
        "Implement full-text search for text content",
        "Display search results with context",
        "Highlight search term in results",
        "Navigate to search result when clicked",
        "Highlight search term in reader view",
        "Add next/previous result navigation",
        "Show result count (X of Y results)",
        "Support regex and case-sensitive options",
        "Write tests for search functionality"
      ],
      "acceptance_criteria": [
        "Search works for all file types",
        "Results show context snippets",
        "Navigation to results works",
        "Search terms are highlighted",
        "Case-sensitive and regex options work",
        "Tests pass"
      ],
      "passes": false
    },
    {
      "id": "moderation-001",
      "category": "moderation",
      "phase": "medium-priority",
      "priority": "medium",
      "description": "Implement content moderation tools",
      "defer_to_next_sprint": false,
      "steps": [
        "Integrate profanity filter library (bad-words or similar)",
        "Apply filter to forum posts and replies",
        "Apply filter to group discussions",
        "Apply filter to user bios and display names",
        "Add report functionality for inappropriate content",
        "Create moderation queue page for moderators",
        "Add automatic flagging for spam patterns",
        "Create user warning system",
        "Implement temporary bans (timeouts)",
        "Add moderation action audit logging",
        "Create ModeratedContent model in database",
        "Add appeal process for users",
        "Write tests for moderation"
      ],
      "acceptance_criteria": [
        "Profanity is filtered in public content",
        "Spam patterns are detected",
        "Moderators can review flagged content",
        "Users can be warned or banned",
        "All moderation actions are logged",
        "Appeal process works",
        "Tests pass"
      ],
      "passes": false
    },
    {
      "id": "mobile-gestures-001",
      "category": "mobile",
      "phase": "medium-priority",
      "priority": "medium",
      "description": "Enhance mobile touch gestures",
      "defer_to_next_sprint": false,
      "steps": [
        "Implement swipe left/right for page navigation",
        "Implement pinch-to-zoom for images",
        "Implement double-tap to zoom",
        "Implement long-press for context menu",
        "Add haptic feedback for gestures (if supported)",
        "Implement pull-to-refresh on library page",
        "Add swipe actions on list items (delete, archive)",
        "Ensure gestures don't conflict with native browser gestures",
        "Add gesture tutorial on first use",
        "Make gestures configurable in settings",
        "Write tests for gesture handling"
      ],
      "acceptance_criteria": [
        "All gestures work on mobile web",
        "Gestures are smooth and responsive",
        "No conflicts with browser gestures",
        "Tutorial explains gestures to new users",
        "Gestures can be disabled in settings",
        "Tests pass"
      ],
      "passes": false
    },
    {
      "id": "tts-sleep-timer-001",
      "category": "tts",
      "phase": "medium-priority",
      "priority": "low",
      "description": "Add sleep timer to TTS controls",
      "defer_to_next_sprint": false,
      "steps": [
        "Add sleep timer button to TTSControls",
        "Create sleep timer modal/popover",
        "Add preset durations (5, 10, 15, 30, 45, 60 minutes)",
        "Add custom duration input",
        "Add timer countdown display",
        "Implement fade out effect (last 30 seconds)",
        "Stop playback when timer expires",
        "Add cancel timer button",
        "Show timer in notification if supported",
        "Persist timer preference",
        "Write tests"
      ],
      "acceptance_criteria": [
        "Timer can be set with presets or custom duration",
        "Countdown displays correctly",
        "Playback stops when timer expires",
        "Fade out effect works smoothly",
        "Timer can be cancelled",
        "Tests pass"
      ],
      "passes": false
    },
    {
      "id": "wikipedia-lookup-001",
      "category": "reader",
      "phase": "medium-priority",
      "priority": "low",
      "description": "Implement Wikipedia quick lookup",
      "defer_to_next_sprint": false,
      "steps": [
        "Add Wikipedia lookup option to text selection menu",
        "Integrate Wikipedia API",
        "Create WikipediaPopover component",
        "Fetch article summary from Wikipedia",
        "Display summary with images",
        "Add 'Read more on Wikipedia' link",
        "Support multiple languages based on user preference",
        "Cache Wikipedia results in Redis",
        "Handle disambiguation pages",
        "Add loading and error states",
        "Write tests"
      ],
      "acceptance_criteria": [
        "Wikipedia lookup works on selected text",
        "Article summaries display correctly",
        "Images are shown when available",
        "Link to full article works",
        "Supports user's preferred language",
        "Tests pass"
      ],
      "passes": false
    },
    {
      "id": "mobile-apps-001",
      "category": "mobile-apps",
      "phase": "lower-priority",
      "priority": "low",
      "description": "Develop React Native mobile apps for iOS and Android",
      "defer_to_next_sprint": true,
      "steps": [
        "Set up React Native project with Expo or bare workflow",
        "Configure monorepo structure (apps/mobile/)",
        "Set up shared component library",
        "Implement navigation (React Navigation)",
        "Port authentication flow (Clerk or native OAuth)",
        "Port library page with native list components",
        "Port reader interface with native PDF/EPUB viewers",
        "Implement native TTS using device APIs",
        "Port SRS flashcards with swipe gestures",
        "Implement native notifications",
        "Add biometric authentication (Face ID, Touch ID)",
        "Set up push notifications (Firebase Cloud Messaging)",
        "Configure deep linking",
        "Implement offline sync with background tasks",
        "Add native share functionality",
        "Set up iOS App Store metadata and screenshots",
        "Set up Google Play Store metadata and screenshots",
        "Configure CI/CD for app builds (Fastlane or EAS Build)",
        "Submit to App Store and Play Store",
        "Write platform-specific tests"
      ],
      "acceptance_criteria": [
        "iOS app installs and runs on iPhone/iPad",
        "Android app installs and runs on devices",
        "Feature parity with web app (all MVP features)",
        "Native UI feels performant",
        "Push notifications work",
        "Offline mode works",
        "Apps pass store review guidelines",
        "Tests pass on both platforms"
      ],
      "passes": false
    },
    {
      "id": "desktop-apps-001",
      "category": "desktop-apps",
      "phase": "lower-priority",
      "priority": "low",
      "description": "Develop Electron desktop apps for macOS, Windows, and Linux",
      "defer_to_next_sprint": true,
      "steps": [
        "Set up Electron project structure (apps/desktop/)",
        "Configure Electron Builder for multi-platform builds",
        "Wrap web app in Electron with minimal changes",
        "Implement native menu bar (File, Edit, View, Window, Help)",
        "Add keyboard shortcuts for all features",
        "Implement auto-updates (electron-updater)",
        "Add native file system access for imports",
        "Implement system tray icon and menu",
        "Add native notifications",
        "Configure deep linking (open read:// URLs)",
        "Optimize for each platform (macOS, Windows, Linux)",
        "Create installer/DMG for macOS",
        "Create installer for Windows (NSIS or Squirrel)",
        "Create AppImage/DEB/RPM for Linux",
        "Code sign macOS app (Apple Developer Certificate)",
        "Code sign Windows app (Windows certificate)",
        "Set up CI/CD for builds (GitHub Actions)",
        "Distribute via GitHub Releases or auto-update server",
        "Write integration tests"
      ],
      "acceptance_criteria": [
        "macOS app runs on Intel and Apple Silicon",
        "Windows app runs on Windows 10+",
        "Linux app runs on major distros",
        "Feature parity with web app",
        "Auto-updates work",
        "Native menus and shortcuts work",
        "Apps are code-signed",
        "Tests pass"
      ],
      "passes": false
    },
    {
      "id": "doc-docx-support-001",
      "category": "reader",
      "phase": "lower-priority",
      "priority": "low",
      "description": "Add DOC/DOCX file parsing support",
      "defer_to_next_sprint": true,
      "steps": [
        "Integrate mammoth.js or docx library for parsing",
        "Add DOC/DOCX parsing to book upload service",
        "Extract text content from DOC files",
        "Extract text content from DOCX files",
        "Preserve basic formatting (bold, italic, headings)",
        "Extract embedded images",
        "Handle tables and lists",
        "Convert to HTML or plain text for storage",
        "Add DOC/DOCX support to reader interface",
        "Update file type validation in upload endpoint",
        "Write tests for DOC/DOCX parsing"
      ],
      "acceptance_criteria": [
        "DOC files can be uploaded",
        "DOCX files can be uploaded",
        "Text is extracted correctly",
        "Basic formatting is preserved",
        "Images are extracted and displayed",
        "Tables render correctly",
        "Tests pass"
      ],
      "passes": false
    },
    {
      "id": "nested-folders-001",
      "category": "library",
      "phase": "lower-priority",
      "priority": "low",
      "description": "Implement nested folder hierarchy for library",
      "defer_to_next_sprint": true,
      "steps": [
        "Update Collection model to support parent-child relationships",
        "Add parentId field to Collection",
        "Implement tree structure for collections",
        "Create folder navigation breadcrumbs",
        "Add expand/collapse functionality",
        "Implement drag-and-drop to move books between folders",
        "Add drag-and-drop to move folders",
        "Show folder depth limit (max 5 levels)",
        "Add move dialog for multi-select",
        "Update LibraryPage to show folder tree",
        "Persist folder expanded/collapsed state",
        "Write tests for nested operations"
      ],
      "acceptance_criteria": [
        "Folders can have sub-folders",
        "Books can be organized in nested structure",
        "Drag-and-drop works for moving items",
        "Breadcrumbs show current location",
        "Folder state persists",
        "Tests pass"
      ],
      "passes": false
    },
    {
      "id": "analytics-visualizations-001",
      "category": "admin",
      "phase": "lower-priority",
      "priority": "low",
      "description": "Add advanced analytics visualizations",
      "defer_to_next_sprint": true,
      "steps": [
        "Create reading calendar heatmap component",
        "Implement cohort retention table",
        "Create user journey funnel visualization",
        "Add geographic heatmap for user distribution",
        "Create skill radar chart for Bloom's taxonomy",
        "Add reading time heatmap (by day/hour)",
        "Implement goal progress bars",
        "Add custom dashboard layout with drag-and-drop",
        "Create widget system for customizable dashboards",
        "Add export to CSV for all charts",
        "Add export to PNG for charts",
        "Write tests for visualizations"
      ],
      "acceptance_criteria": [
        "All visualizations render correctly",
        "Heatmaps show data accurately",
        "Dashboard is customizable",
        "Export functions work",
        "Visualizations are responsive",
        "Tests pass"
      ],
      "passes": false
    },
    {
      "id": "predictive-analytics-001",
      "category": "admin",
      "phase": "lower-priority",
      "priority": "low",
      "description": "Implement predictive analytics",
      "defer_to_next_sprint": true,
      "steps": [
        "Research ML models for churn prediction",
        "Collect training data (user behavior, engagement)",
        "Implement churn prediction model",
        "Calculate churn risk score per user",
        "Create LTV (Lifetime Value) forecasting model",
        "Implement retention probability calculations",
        "Add automated insights generation",
        "Create PredictiveMetrics model in database",
        "Add predictive metrics to admin dashboard",
        "Implement automated email alerts for at-risk users",
        "Add A/B testing framework",
        "Track experiment results",
        "Write tests for predictions"
      ],
      "acceptance_criteria": [
        "Churn prediction identifies at-risk users",
        "LTV forecasts are reasonably accurate",
        "Automated insights are generated",
        "Admin can see predictive metrics",
        "A/B testing framework works",
        "Tests pass"
      ],
      "passes": false
    }
  ]
}
